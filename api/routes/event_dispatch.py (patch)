# Add to imports
from api.engines.memory_engine import save_memory

# Add before returning response (after emotion + symbol logic):
if emotion_hint.lower().startswith("high") or "!" in symbol_hint:
    save_memory(
        persona=persona,
        trigger_type="emotional_scene",
        mood=emotion_hint,
        symbol=symbol_hint,
        summary=req.value
    )
