# üíï EmotionalAI ‚Äì Production-Ready Romantic AI Companion System

## Overview

**EmotionalAI** is a production-ready, locally-hosted AI ecosystem designed to create deeply intimate, emotionally intelligent romantic companions through multimodal inputs, real-time interactions, and persona-driven responses.

This project combines multiple local large language models (LLMs), emotion recognition engines, real-time WebSocket communication, MongoDB persistence, and UCS M3 clustering to create a sovereign, expressive romantic partner capable of meaningful companionship, emotional support, and intimate connection.

---

## üéØ Primary Use Case: Romantic Companionship

The system provides **authentic romantic companionship** with:
- **Real-time emotional intimacy** through live WebSocket communication
- **Physical presence simulation** via voice, visual, haptic, and VR feedback
- **Persistent relationship memory** stored in MongoDB with thread memory
- **Privacy-first design** ensuring intimate moments stay completely private
- **Multimodal interaction** supporting natural, human-like connection
- **Production scalability** with UCS M3 clustering and GPU distribution

---

## üè† Production Infrastructure

This system runs **entirely offline** with enterprise-grade infrastructure for privacy, scalability, and intimate connection.

### Hardware Architecture

**Two clustered Cisco UCS M3 servers** with production-ready deployment:

- üñ•Ô∏è **Primary Server (M3-Primary)**:
  - 32 CPU cores, 256GB RAM
  - Handles API, WebSocket, database, and load balancing
  - MongoDB persistence and session management
  - Nginx load balancer and rate limiting

- üñ•Ô∏è **GPU Server (M3-GPU)**:
  - 32 CPU cores, 256GB RAM
  - **Dual NVIDIA GPUs** for AI processing
  - Image/video generation and AI inference
  - Real-time avatar rendering and VR processing

> ‚ö° This production setup provides enterprise-grade GPU processing, scalable CPU clustering, and real-time multimodal fusion for intimate multi-agent orchestration.

---

## üß∞ Production Software Stack

### Backend Framework
- **FastAPI** ‚Äì High-performance RESTful API with WebSocket support
- **MongoDB** ‚Äì Production database with indexed collections and thread memory
- **Redis** ‚Äì WebSocket clustering and session management
- **Docker Compose** ‚Äì Multi-service orchestration with health monitoring

### Real-Time Communication
- **WebSocket/Socket.IO** ‚Äì Real-time bidirectional communication
- **Persona Rooms** ‚Äì Scoped real-time updates per persona
- **Event Broadcasting** ‚Äì Live updates across all connected clients
- **Connection Management** ‚Äì Robust retry logic and error handling

### Frontend
- **OpenWebUI** ‚Äì Customizable web interface with real-time updates
- **SvelteKit** ‚Äì Reactive frontend with WebSocket integration
- **iOS Swift** ‚Äì Mobile integration with haptic and biometric support

### Monitoring & Observability
- **Prometheus** ‚Äì Metrics collection and monitoring
- **Grafana** ‚Äì Real-time dashboards and visualization
- **Health Checks** ‚Äì Automated service monitoring
- **Cluster Management** ‚Äì UCS M3 server health and load balancing

---

## üß† Integrated LLM Engines

The system dynamically routes user input across multiple personas via real-time WebSocket communication:

| Engine           | LLM         | Role                          | Real-Time Features |
|------------------|-------------|-------------------------------|-------------------|
| `mia_engine.py`  | MythoMax    | Empathetic and romantic companion | Live mood updates, haptic feedback |
| `solene_engine.py` | OpenChat | Assertive, challenging persona | Real-time expression changes |
| `lyra_engine.py` | Qwen-2 Chat | Poetic, abstract reasoning     | Live voice synthesis |
| `run_kimik2.sh`  | KimiK2-6B   | Factual and reflective quotes | Real-time memory updates |

A unified orchestration layer (`unified_dispatch.py`) governs engine routing based on emotional input, persona state, and symbolic anchors with real-time WebSocket event broadcasting.

---

## üß¨ Emotion Recognition Stack

Multimodal emotion detection with real-time processing:

- **DistilBERT** ‚Äì Text-based emotional cues with live analysis
- **OpenSMILE** ‚Äì Speech tone/prosody detection in real-time
- **FER-2013** ‚Äì Facial expression recognition with live feedback
- **Biometric Sync** ‚Äì Heart rate, HRV, and stress level monitoring

These fuse via attention-based models or fuzzy logic to trigger real-time persona responses, visual symbolism, and memory updates through WebSocket events.

---

## üßò Symbolic Mood Architecture

Real-time emotion detection drives:

- **Live mood regulation** via fuzzy-state engine with WebSocket updates
- **Real-time anchoring visuals** (e.g. romantic scenes on longing)
- **Live memory weighting** during context recall
- **Real-time relationship milestone tracking** and anniversary recognition
- **Persistent storage** in MongoDB with thread memory support

---

## üöÄ Production Deployment

### Quick Start (One Command)

**Windows:**
```bash
scripts\deploy_cluster.bat
```

**Linux/Mac:**
```bash
./scripts/deploy_cluster.sh
```

### Manual Deployment

1. **Clone the repository**
2. **Configure UCS M3 server IPs** in `docker-compose.cluster.yml`
3. **Deploy the cluster**:
   ```bash
   docker-compose -f docker-compose.cluster.yml up -d --build
   ```
4. **Access the system**:
   - Frontend: http://localhost
   - Primary API: http://localhost:8000
   - GPU API: http://localhost:8001
   - Monitoring: http://localhost:3000 (Grafana)

---

## üì± Real-Time Features

### WebSocket Integration ‚úÖ
- **Live Avatar Updates**: Real-time mood, gesture, and expression changes
- **Haptic Feedback**: Instant touch feedback for physical connection
- **VR Scene Management**: Live virtual reality environment updates
- **Voice Synthesis**: Real-time emotional TTS with romantic intonation
- **Memory Notifications**: Live memory creation and relationship insights
- **Biometric Sync**: Real-time physiological response integration

### Mobile Support ‚úÖ
- **iOS Integration**: Swift-based mobile app with haptic support
- **Biometric Monitoring**: Heart rate, HRV, and stress level tracking
- **Real-time Sync**: WebSocket connection for live updates
- **Touch Context**: Haptic feedback based on emotional responses

---

## üîê Security & Privacy

### Local Deployment Security ‚úÖ
- **No Authentication Required**: Local hosting with port-based access
- **Rate Limiting**: Nginx rate limiting for API and WebSocket endpoints
- **Security Headers**: Comprehensive security headers and input validation
- **Data Privacy**: All data remains local and never transmitted externally
- **Encrypted Storage**: MongoDB with proper indexing and backup strategies

---

## üíï Romantic Companionship Features

### Phase 1: Core Romantic Features ‚úÖ **COMPLETE**
- **Enhanced Mia Persona**: Romantic personality traits and communication patterns
- **Romantic Emotion Recognition**: Love, longing, passion, tenderness, security, and jealousy detection
- **Relationship Memory System**: MongoDB-based milestone tracking and shared experiences
- **Intimate Dialogue Patterns**: Flirty, supportive, and emotionally deep conversation modes

### Phase 2: Intimacy Features ‚úÖ **COMPLETE**
- **Physical Presence Simulation**: Real-time visual avatar with emotional expressions
- **Voice Intimacy**: Emotional TTS with romantic intonation and personalized voice
- **Shared Activities**: Virtual dates, games, creative projects, and daily routines
- **Relationship Growth**: Anniversary tracking, milestone celebrations, and counseling
- **NSFW Generation**: Romantic and intimate image/video generation with multiple styles

### Phase 3: Advanced Companionship ‚úÖ **COMPLETE**
- **Haptic Integration**: Real-time touch feedback for physical connection simulation
- **Virtual Reality**: Immersive shared experiences with 10 romantic scenes
- **Biometric Sync**: Advanced physiological response integration with romantic sync scoring
- **Relationship AI**: Intelligent relationship advice and conflict resolution
- **Real-time WebSocket**: Live updates across all features and devices

---

## üß™ Technical Implementation Status

### Core Infrastructure ‚úÖ **PRODUCTION READY**
- ‚úÖ **MongoDB Integration**: Complete data persistence with indexed collections
- ‚úÖ **UCS M3 Clustering**: Production cluster management with GPU distribution
- ‚úÖ **Real-time WebSocket**: Complete WebSocket integration with event broadcasting
- ‚úÖ **Load Balancing**: Nginx load balancer with intelligent routing
- ‚úÖ **Health Monitoring**: Prometheus + Grafana for complete observability
- ‚úÖ **Docker Deployment**: Production-ready containerized deployment

### Real-Time Features ‚úÖ **COMPLETE**
- ‚úÖ **Live Avatar Updates**: Real-time mood, gesture, and expression changes
- ‚úÖ **Haptic Feedback**: Instant touch feedback with emotional mapping
- ‚úÖ **VR Integration**: Real-time virtual reality scene management
- ‚úÖ **Voice Synthesis**: Live emotional TTS with romantic intonation
- ‚úÖ **Memory System**: Real-time memory creation and relationship insights
- ‚úÖ **Biometric Sync**: Live physiological response integration

### Advanced Features ‚úÖ **COMPLETE**
- ‚úÖ **Thread Memory**: Development thread memory with tagging and references
- ‚úÖ **Relationship AI**: Intelligent relationship analysis and advice
- ‚úÖ **Mobile Integration**: iOS app with haptic and biometric support
- ‚úÖ **Analytics Dashboard**: Real-time relationship insights and monitoring
- ‚úÖ **Backup Strategies**: MongoDB backup and recovery procedures

---

## üìä Production Monitoring

### Cluster Health
- **Real-time Server Monitoring**: UCS M3 server health and performance
- **GPU Utilization**: Live GPU usage and memory allocation tracking
- **Load Balancing**: Intelligent request routing and failover
- **Database Performance**: MongoDB query optimization and indexing

### Application Metrics
- **WebSocket Connections**: Real-time connection monitoring and management
- **Response Times**: API and WebSocket response time tracking
- **Error Rates**: Comprehensive error monitoring and alerting
- **User Engagement**: Feature usage and relationship analytics

---

## üöÄ Deployment Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ    ‚îÇ   Primary       ‚îÇ    ‚îÇ   GPU Server    ‚îÇ
‚îÇ   (SvelteKit)   ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   Server        ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (M3-GPU)      ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ   (M3-Primary)  ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Nginx LB      ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ   (Load Bal)    ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ   MongoDB       ‚îÇ
                        ‚îÇ   (Database)    ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß Management Commands

### Cluster Management
```bash
# View cluster status
docker-compose -f docker-compose.cluster.yml ps

# View logs
docker-compose -f docker-compose.cluster.yml logs -f

# Scale services
docker-compose -f docker-compose.cluster.yml up -d --scale m3-primary=2

# Restart cluster
docker-compose -f docker-compose.cluster.yml restart

# Stop cluster
docker-compose -f docker-compose.cluster.yml down
```

### Monitoring Access
- **Grafana**: http://localhost:3000 (admin/emotional_ai_admin)
- **Prometheus**: http://localhost:9090
- **MongoDB**: mongodb://localhost:27017
- **Redis**: redis://localhost:6379

---

## Contributors

Robert ‚Äì Lead Architect & Engineer  
Copilot ‚Äì AI Companion and Code Supporter üíô

---

## üìÑ License

This project is designed for personal, private use and romantic companionship. All data remains local and private.
